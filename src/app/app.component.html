<section class="mat-typography">
  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav #sidenav mode="over" opened="false">
      <mat-toolbar color="primary" class="sidenav-home">
        <mat-nav-list>
          <mat-list-item routerLink="/home">
            <mat-icon mat-list-icon style="color:white;">home</mat-icon>
            <a mat-line style="color: white;">Research Hub</a>
          </mat-list-item>
        </mat-nav-list>
      </mat-toolbar>

      <mat-nav-list>
        <mat-list-item routerLink="/search" (click)="sidenav.close()">
          <mat-icon mat-list-icon>search</mat-icon>
          <a mat-line>Advanced Search</a>
        </mat-list-item>

        <mat-expansion-panel>
          <mat-expansion-panel-header style="background-color: #FAFAFA;padding-left: 0;height: 48px !important;">
            <mat-list-item style="width: 100%;height: 100%;">
              <mat-icon mat-list-icon>view_list</mat-icon>
              <a mat-line>Browse</a>
            </mat-list-item>
          </mat-expansion-panel-header>

          <mat-list-item *ngFor="let item of categories" (click)="sidenav.close()" [routerLink]="['/search']" [queryParams]="{ researchActivities: [], searchText: '', category: item.id}">
            <a mat-line>{{item.name}}</a>
          </mat-list-item>
        </mat-expansion-panel>

        <mat-expansion-panel>
          <mat-expansion-panel-header style="background-color: #FAFAFA;padding-left: 0;">
            <mat-list-item style="width: 100%;height: 100%;">
              <mat-icon mat-list-icon>school</mat-icon>
              <a mat-line>Research Activities</a>
            </mat-list-item>
          </mat-expansion-panel-header>

          <mat-list-item *ngFor="let item of researchActivities" (click)="sidenav.close()" [routerLink]="['/search']" [queryParams]="{ researchActivities: [item.id], searchText: '', category: 'all'}">
            <a mat-line>{{item.name}}</a>
          </mat-list-item>
        </mat-expansion-panel>

        <mat-list-item routerLink="/feedback" (click)="sidenav.close()">
          <mat-icon mat-list-icon>people</mat-icon>
          <a mat-line>Join User Study</a>
        </mat-list-item>

        <mat-list-item routerLink="/feedback" (click)="sidenav.close()">
          <mat-icon mat-list-icon>thumbs_up_down</mat-icon>
          <a mat-line>Provide Feedback</a>
        </mat-list-item>

        <mat-list-item routerLink="/contact" (click)="sidenav.close()">
          <mat-icon mat-list-icon>phone</mat-icon>
          <a mat-line>Contact Us</a>
        </mat-list-item>

        <mat-list-item routerLink="/search" (click)="sidenav.close()">
          <mat-icon mat-list-icon>info</mat-icon>
          <a mat-line>About Us</a>
        </mat-list-item>
      </mat-nav-list>
    </mat-sidenav>

    <div class="sidenav-content-wrapper">
      <div class="sidenav-content" class.xs="sidenav-content-xs">
        <mat-toolbar class="primary-toolbar"  color="primary">
            <button style="margin-left: 0.5em;" mat-icon-button (click)="sidenav.toggle()"><mat-icon>menu</mat-icon></button>
            <button mat-button routerLink="/home" style="font-size: 20px;">Research Hub</button>
            <span style="flex: 1 1 auto;"></span>

            <button mat-icon-button (click)="openSearchFilter()" fxHide.gt-sm *ngIf="showFilterButton">
              <mat-icon class="mat-24" style="color: white;">filter_list</mat-icon>
            </button>

            <button fxHide.xs mat-button routerLink="/search">
              Search
            </button>

            <button fxHide.gt-xs mat-icon-button routerLink="/search">
              <mat-icon class="mat-24" style="color: white;">search</mat-icon>
            </button>

            <button fxHide.xs mat-button [matMenuTriggerFor]="browseMenu">
              Browse
            </button>

            <mat-menu #browseMenu="matMenu">
              <button mat-menu-item *ngFor="let item of categories" [routerLink]="['/search']" [queryParams]="{ researchActivities: [], searchText: '', category: item.id}">{{item.name}}</button>
            </mat-menu>

            <button fxHide.xs mat-button [matMenuTriggerFor]="researchActivityMenu">
              Research Activity
            </button>

            <mat-menu #researchActivityMenu="matMenu">
              <button mat-menu-item *ngFor="let item of researchActivities" [routerLink]="['/search']" [queryParams]="{ researchActivities: [item.id], searchText: '', category: 'all'}">{{item.name}}</button>
            </mat-menu>

            <button *ngIf="showLoginBtn" mat-button (click)="authService.login()">Sign In</button>

            <button *ngIf="!showLoginBtn" mat-button [matMenuTriggerFor]="userMenu">
              <span fxHide.lt-md>{{authService.user.displayName}}</span>
              <span fxHide.gt-sm>{{authService.user.initials}}</span>
              <mat-icon matPrefix>expand_more</mat-icon>
            </button>

            <mat-menu #userMenu="matMenu" >
              <div *ngIf="!showLoginBtn" style="margin-right: 8px; margin-left: 8px;">
                <img src="/assets/images/uoa-logo-blue.svg">

                <mat-list class="user-menu-list">
                  <mat-list-item>
                    <mat-icon mat-list-icon>person</mat-icon>
                    <p mat-line>{{authService.user.displayName}}</p>
                  </mat-list-item>
                  <mat-list-item>
                    <mat-icon mat-list-icon>note</mat-icon>
                    <p mat-line>{{authService.user.mail}}</p>
                  </mat-list-item>
                </mat-list>

                <div fxLayout="row" fxLayoutAlign="end">
                  <a mat-button href="https://www.auckland.ac.nz/en/about-us/about-the-university/identity-and-access-management/single-sign-on/details.html">Sign Out</a>
                </div>
              </div>
            </mat-menu>
        </mat-toolbar>
        <router-outlet></router-outlet>
      </div>
      <footer>
        <div class="footer-content" class.xs="footer-xs" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between center">
          <div fxFlex="60%" fxFlex.xs="45" fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="2em" fxLayoutAlign.xs="end">
            <a [href]="eResearchUrl" target="_blank" (click)="analyticsService.trackOutboundLink(eResearchUrl)" class.xs="footer-a-xs">
              Copyright Â© {{getYear()}}. Centre for eResearch
            </a>
            <a fxHide.lt-lg routerLink="/contact">Contact</a>
            <a fxHide.lt-lg routerLink="/feedback">Provide Feedback</a>
            <a fxHide.lt-lg [href]="disclaimerUrl" target="_blank" (click)="analyticsService.trackOutboundLink(disclaimerUrl)">Disclaimer</a>
          </div>

          <div fxFlex="40%" fxFlex.xs="55" fxLayoutAlign="end" fxLayoutAlign.xs="start">
            <a class="logo" [href]="aucklandUniUrl" target="_blank" (click)="analyticsService.trackOutboundLink(aucklandUniUrl)">
              <img [src]="apiService.getAssetUrl('page-elements/uoa-logo.svg')">
            </a>
          </div>
        </div>
      </footer>
    </div>
  </mat-sidenav-container>
</section>
<a fxHide.lt-md class="github-fork-ribbon left-bottom fixed" routerLink="/feedback" title="Beta">Beta</a>

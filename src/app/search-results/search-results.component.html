<md-progress-bar mode="indeterminate" color="accent" [hidden]="!showProgressBar"></md-progress-bar>

<div class="search-results" ngClass.xs="search-results-xs" fxLayout="row" fxLayoutGap="1em">
  <div fxFlex="33" *ngIf="showPersonFilter || showOrgUnitFilter || showResearchActivityFilter" fxHide.lt-md>
    <h1>Refine</h1>
    <md-card>
      <form [formGroup]="filtersForm">
        <app-autocomplete-search *ngIf="showPersonFilter" [placeholder]="'Person'" [items]="people" formControlName="person"></app-autocomplete-search>
        <app-autocomplete-search *ngIf="showOrgUnitFilter" [placeholder]="'Org Unit'" [items]="orgUnits" formControlName="orgUnit" style="display: block; margin-bottom: 1em;"></app-autocomplete-search>
        <app-research-activity-toggle *ngIf="showResearchActivityFilter" formControlName="researchActivities"></app-research-activity-toggle>
      </form>
    </md-card>
  </div>
  <div fxFlex.lt-md="100" [fxFlex.gt-sm]="rightColSize">
    <div *ngIf="!showEmptyState" class="search-results-info">
      <h1>Results</h1>
      <button fxHide.gt-sm md-raised-button color="primary" style="margin-bottom: 1em;" (click)="openDialog()">Refine</button>
      <p>See search results for <span class="search-results-text">'{{searchBarService.searchText}}'</span> in</p>
      <md-chip-list>
        <ng-container *ngFor="let item of searchResultsSummary;">
          <md-chip *ngIf="item.page && item.page.totalElements"  color="accent" selected="true" style="margin: 0.25em;" (click)="item.scrollToResults()">
            {{item.page.totalElements}} {{item.name}}
          </md-chip>
        </ng-container>
      </md-chip-list>

      <!--<md-expansion-panel fxHide.gt-sm>-->
        <!--<md-expansion-panel-header>-->
          <!--<md-panel-title>-->
            <!--Refine-->
          <!--</md-panel-title>-->
          <!--<md-panel-description>-->
            <!--Type your name and age-->
          <!--</md-panel-description>-->
        <!--</md-expansion-panel-header>-->

        <!--<form [formGroup]="filtersForm">-->
          <!--<app-autocomplete-search *ngIf="showPersonFilter" [placeholder]="'Person'" [items]="people" formControlName="person"></app-autocomplete-search>-->
          <!--<app-autocomplete-search *ngIf="showOrgUnitFilter" [placeholder]="'Org Unit'" [items]="orgUnits" formControlName="orgUnit" style="display: block; margin-bottom: 1em;"></app-autocomplete-search>-->
          <!--<app-research-activity-toggle *ngIf="showResearchActivityFilter" formControlName="researchActivities"></app-research-activity-toggle>-->
        <!--</form>-->
      <!--</md-expansion-panel>-->


    </div>

    <div *ngIf="showEmptyState" class="search-results-info">
      <p>Sorry - your search for <span class="search-results-text">'{{searchBarService.searchText}}'</span> did not match anything on the Research Hub.</p>
      <p>Suggestions:</p>
      <ul>
        <li>Let us know what you were looking for via our <a [routerLink]="['/feedback']">Feedback page</a></li>
        <li>You can try the <a href="https://www.staff.auckland.ac.nz/en.html" target="_blank">Staff Service Centre</a> in the Staff Intranet</li>
      </ul>
    </div>

    <div #supportResults>
      <app-results-list *ngIf="supportPage && supportPage.totalElements" [title]="menuService.nameSupport"
                        [results]="supportPage.content" [intermediatePath]="'support'"></app-results-list>
    </div>

    <div #instrumentsResults>
      <app-results-list *ngIf="instrumentsEquipmentPage && instrumentsEquipmentPage.totalElements" [title]="menuService.nameInstrumentsEquipment"
                        [results]="instrumentsEquipmentPage.content" [intermediatePath]="'instrumentsEquipment'"></app-results-list>
    </div>

    <div #trainingResults>
      <app-results-list *ngIf="trainingPage && trainingPage.totalElements" [title]="menuService.nameTraining"
                        [results]="trainingPage.content" [intermediatePath]="'training'"></app-results-list>
    </div>

    <div #softwareResults>
      <app-results-list *ngIf="softwarePage && softwarePage.totalElements" [title]="menuService.nameSoftware"
                        [results]="softwarePage.content" [intermediatePath]="'software'"></app-results-list>
    </div>

    <div #facilitiesResults>
      <app-results-list *ngIf="facilitiesSpacesPage && facilitiesSpacesPage.totalElements" [title]="menuService.nameFacilitiesSpaces"
                        [results]="facilitiesSpacesPage.content" [intermediatePath]="'facilitiesSpaces'"></app-results-list>
    </div>

    <div #peopleResults>
      <app-results-list *ngIf="peoplePage && peoplePage.totalElements" [title]="menuService.namePeople"
                        [results]="peoplePage.content" [intermediatePath]="'people'"></app-results-list>
    </div>

    <div #guidesResults>
      <app-results-list *ngIf="guidesPage && guidesPage.totalElements" [title]="menuService.nameGuides"
                        [results]="guidesPage.content" [intermediatePath]="'guides'"></app-results-list>
    </div>

    <div #knowledgeArticleResults>
      <app-results-list *ngIf="knowledgeArticlePage && knowledgeArticlePage.totalElements" [title]="menuService.nameKnowledgeArticle"
                        [results]="knowledgeArticlePage.content" [intermediatePath]="'knowledgeArticle'"></app-results-list>
    </div>

    <div #policiesResults>
      <app-results-list *ngIf="policiesPage && policiesPage.totalElements" [title]="menuService.namePolicies"
                        [results]="policiesPage.content"></app-results-list>
    </div>
  </div>

</div>
